<!--
* 组件名 音乐播放器组件
* 开发者 : HE
* 参数:  null
* 事件:
* xxx [] - 
-->
<!-- gh header -->
<!Doctype html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>站群组件库</title>
    <link rel="stylesheet" href="https://centereu.kingdomsalvation.org/cdn/zq/common/zq-components/fonts/style.css">
    <link rel="icon"
        href="https://avatars1.githubusercontent.com/u/35259114?s=460&u=c416eb8a5b14e0fda0712d3d258743ac96dd30c7&v=4">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet"
        href="https://centereu.kingdomsalvation.org/cdn/web-farm/findshepherd/framework/css/framework.min.css">

    <!-- layout -->
    <link rel="stylesheet" href="/css/index.css">
</head>

<body>
    <header class="layout-header">
  <div class="js-logo">
    <a href="/"><img src="/sources/images/logo.jpg" alt="logo"></a>
  </div>
  <div class="header-content">
    <h1>站群前端开发组件库</h1>
  </div>
  <div class="header-right d-none d-md-flex">
    <span class="rele"> <i class="icon-expand-more"></i> Releases v1.0.0</span>
    <a href="https://github.com/blueslee2/blueslee2.github.io" class="produce_src d-flex align-items-center">
      <svg height="32" class="octicon octicon-mark-github text-white" viewBox="0 0 16 16" version="1.1" width="32"
        aria-hidden="true">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
      <span>GitHub</span>
    </a>
  </div>
</header>
    <!--gh content -->
    <main class="layout-container">
<h1 class="container t-section-title">音乐播放器组件</h1>

<div id="fix-player">
  <div class="fp-left">
    <div class="player-title">
      <span id="title-box-1">神的话语除去了我眼中的“梁木”（有声读物）</span>
      <span id="title-box-2">神的话语除去了我眼中的“梁木”（有声读物）</span>
    </div>
    <div class="fp-data">
        <span class="current-time">00:00</span>/
        <span class="duration">41:01</span>
    </div>
  </div>
  <div class="fp-center">
    <button class="btn-icon play-pause">
        <i class="icon-play-arrow"></i>
        <i class="icon-pause"></i>
      </button>
  </div>

  <button class="btn-icon btn-icon-close" style="display: none;">
    <i class="icon-close"></i>
    <i class="icon-navigate-next hidden"></i>
  </button>

</div>

<section id="audio">
  <div class="audio-basic">
    <div class="container">
      <h1 class="heading-1">VAudio</h1>
      <p class="text-4">
        该插件只提供js控制原生audio对象, 不提任何样式与html代码
      </p>
      <div class="row">
        <div class="col-12">
          <h3 class="heading-3">功能演示</h3>
          <p class="text-4">请打开控制台查看事件监听回调</p>
          <p class="text-4">
            为了方便演示一下将结合
            <a href="https://gitlab.199101.xyz/front-end/vendor/range"
              >range 插件</a
            >演示一个最简单的音频播放器
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="audio-player">
            <button class="btn-icon play-pause">
              <i class="icon-play-arrow"></i>
              <i class="icon-pause"></i>
            </button>
            <div class="range-box">
              <span class="current-time">00:00</span>
              <div id="range-target"></div>
              <span class="duration">00:00</span>
            </div>
            <div class="volume-box d-none d-md-flex align-items-center">
              <button class="btn-icon"><i class="icon-volume-down"></i></button>
              <div id="volume-range-target"></div>
              <button class="btn-icon"><i class="icon-volume-up"></i></button>
            </div>
            <div class="audio-download d-none d-md-block">
              <a class="btn-icon" href="https://www.hidden-advent.org/download.html?type=audiobooks&mime=audio&object_id=138115">
                <i class="icon-list-download"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
      <hr />
      <div class="row">
        <div class="col-12">
          <button class="btn green" id="play">播放</button>
          <button class="btn green" id="pause">暂停</button>
          <button class="btn green" id="mute">静音</button>
          <button class="btn green" id="unmute">取消静音</button>
          <button class="btn green" id="destroy">销毁</button>
        </div>
        <div class="col-12">
          <div class="text-4">下面是源代码, 功能很简单, 实现起来也很简单</div>
          <pre><code class="language-javascript">
    let V = new VAudio({
      src:
        "https://tr.kingdomsalvation.org/wp-content/grand-media/audio/shxg0306.m4a",
      autoPlay: true
    });
    
    let R = new Range({
      el: "#range-target",
      value: 0,
      min: 0,
      max: 1000
    });
    let durationSeconds = 0;
    
    V.on("loadstart", () => {
      console.log("loadstart");
    });
    
    //  歌曲加载完后, 更新时间码
    V.on("loaded", (ev, currentTime, duration) => {
      $(".current-time").html(V.format_time(currentTime));
      $(".duration").html(V.format_time(duration));
      durationSeconds = duration;
    });
    
    //  拖拽range更新音频
    //  使用isSwitch避免用户拖拽滑杆时频繁更新音频
    let isSwitch: boolean = false;
    R.on("changeStart", () => (isSwitch = true));
    R.on("changeEnded", () => {
      isSwitch = false;
      V.play();
    });
    R.on("slideChange", (event, value, percentage, isManually) => {
      //  更新音频
      !isSwitch && !isManually && V.set_current_time(percentage, true);
      //  更新时间吗, 实际开发中, 请想保存duration, 不要频繁调用
      $(".current-time").html(V.format_time(durationSeconds * percentage));
    });
    V.on("watcherUpdate", (event, currentTime, percentage, duration, ended) => {
      if (!isSwitch) {
        //  更新range对象
        R.set_value(percentage, true);
        //  更新时间吗
        $(".current-time").html(V.format_time(currentTime));
      }
    })
      .on("ended", () => {
        console.log("ended");
        V.set_current_time(0);
        V.play();
      })
      .on("play", () => console.log("play"))
      .on("pause", () => console.log("pause"))
      .on("mute", () => console.log("mute"))
      .on("unmute", () => console.log("unmute"))
      .on("destroy", () => console.log("destroy"));
    
    //  按钮绑定
    $("#play").on("click", () => V.play());
    $("#pause").on("click", () => V.pause());
    $("#mute").on("click", () => V.mute());
    $("#unmute").on("click", () => V.unmute());
    $("#destroy").on("click", () => V.destroy());
                    </code></pre>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="test">测试描边渐变+圆角</div>
<!-- gh footer -->
</main> <!-- End content -->

<button class="btn-floating btn-large" id="sidenav-btn"><i class="icon-menu"></i></button>
<section class="layout-sidenav">
  <div class="s-summary" id="js-menu">
    <button class="close-btn"><i class="icon-close"></i></button>
    <header>
      <h4>组件目录</h4>
    </header>
    <div class="s-summary-content" id="js-menu-content">
      
      <ul class="s-summary-list">
        <li class="item home d-none"><a href="/">Home</a>
          
        <li class="item"><a href="/pages/banner.html"><span class="num">1.</span>Banner 组件</a>
          
          <ul class="s-summary-list">
            
            <li class="item"><a href="/pages/banner/banner-1.html">
                <span class="num">1.1</span>非通屏banner</a>
            </li>
            
          </ul>
          
        </li>
        
        <li class="item"><a href="/pages/article/index.html"><span class="num">2.</span>文章 组件</a>
          
          <ul class="s-summary-list">
            
            <li class="item"><a href="/pages/article/default.html">
                <span class="num">2.1</span>默认效果</a>
            </li>
            
            <li class="item"><a href="/pages/article/layout-2.html">
                <span class="num">2.2</span>文章排版2 (tab 一行3个)</a>
            </li>
            
            <li class="item"><a href="/pages/article/layout-3.html">
                <span class="num">2.3</span>文章排版3 (带描述)</a>
            </li>
            
          </ul>
          
        </li>
        
        <li class="item"><a href="/pages/video.html"><span class="num">3.</span>视频 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/audio.html"><span class="num">4.</span>音频 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/ad-article.html"><span class="num">5.</span>广告推荐（文章） 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/ad-call-action.html"><span class="num">6.</span>广告推荐（畅聊） 组件</a>
          
          <ul class="s-summary-list">
            
            <li class="item"><a href="/pages/ad-subscribe/ad-subscribe.html">
                <span class="num">6.1</span>广告推荐（订阅） 组件</a>
            </li>
            
          </ul>
          
        </li>
        
        <li class="item"><a href="/pages/ad-download-apps.html"><span class="num">7.</span>广告推荐（下载APP） 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/ad-others.html"><span class="num">8.</span>广告推荐（其他） 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/verses-by-topic.html"><span class="num">9.</span>主题经文 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/topic.html"><span class="num">10.</span>专题 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/lists.html"><span class="num">11.</span>列表项 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/subscription.html"><span class="num">12.</span>订阅 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/share.html"><span class="num">13.</span>分享 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/gallery-card.html"><span class="num">14.</span>图库卡片 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/exhibition-apps.html"><span class="num">15.</span>导航 App 推荐 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/search.html"><span class="num">16.</span>搜索 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/panel.html"><span class="num">17.</span>Panel 组件</a>
          
        </li>
        
        <li class="item"><a href="/pages/audio-player.html"><span class="num">18.</span>Audio Player 组件</a>
          
        </li>
        
      </ul>
      
    </div>
    <footer></footer>
  </div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/16.1.0/lazyload.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js' crossorigin='anonymous'></script>

<!-- framework -->
<script src="https://centereu.kingdomsalvation.org/cdn/web-farm/findshepherd/framework/js/framework.min.js"></script>

<!-- layout -->
<script src="/js/index.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/prism.min.js"></script>

</body>

</html>
