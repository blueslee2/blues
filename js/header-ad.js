!function(){"use strict";function t(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{d(o.next(t))}catch(t){i(t)}}function c(t){try{d(o.throw(t))}catch(t){i(t)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}d((o=o.apply(t,e||[])).next())}))}function e(t,e){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!((a=(a=r.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(t){i=[6,t],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var n=function(t){if("localStorage"in window)try{return window.localStorage.getItem(t)}catch(t){console.log("Sorry, window no localStorage !")}},o=function(t){return void 0===t&&(t=300),new Promise((function(e){window.setTimeout((function(){e()}),t)}))};new(function(){function a(){this.$headAdBox=$(".header-commercial-wrap"),this.init()}return a.prototype.init=function(){this.detect_localStorage_ad_status(),this.create_commercial_ad(),this.close_head_ad()},a.prototype.detect_localStorage_ad_status=function(){if(n("closeAd")){var t=JSON.parse(n("closeAd"));if(t){var e=(new Date).getTime();this.days=Math.floor((e-t.time)/864e5),this.days<1&&this.$headAdBox.remove()}}},a.prototype.create_commercial_ad=function(){return t(this,void 0,void 0,(function(){var t,n=this;return e(this,(function(e){switch(e.label){case 0:return this.$headAdBox.length<1||window.innerWidth>1248?[2]:((t=this.$headAdBox.find(".recom-item")).map((function(t,e){$(e).addClass("show"),n.header_ad_link($(e)),n.header_ad_image($(e))})),[4,o(300)]);case 1:return e.sent(),t.length&&this.$headAdBox.append('<button class="commercial-close"><i class="icon-close"></i></button>'),[2]}}))}))},a.prototype.header_ad_link=function(t){var e=t.attr("linkType"),n=/Android/i.test(navigator.userAgent)||/Adr/i.test(navigator.userAgent);"device_link"===e&&(n?t.attr("href",t.data("android")):t.attr("href",t.data("ios")))},a.prototype.header_ad_image=function(n){return t(this,void 0,void 0,(function(){var t,a,i,r;return e(this,(function(e){switch(e.label){case 0:return t=n.data("tab-img"),a=n.data("mb-img"),i=n.data("title"),n.html(this.picture(t,a,i)),r=["data-android","data-ios","data-tab-img","data-mb-img","data-title"],n.removeAttr(r.join(" ")),[4,o(300)];case 1:return e.sent(),window.LazyLoad.update(),[2]}}))}))},a.prototype.picture=function(t,e,n){return"<picture>\n              "+(t?'<source data-srcset="'+t+'" media="(min-width: 768px)">':"")+"\n              "+(e?'<source data-srcset="'+e+'" media="(max-width: 767px)">':"")+'\n              <img class="lazy" data-src="'+t+'" width="100%" alt="'+n+'" />\n            </picture>'},a.prototype.close_head_ad=function(){var t=this;this.$headAdBox.on("click",".commercial-close",(function(){t.$headAdBox.css("overflow","hidden").animate({marginTop:-t.$headAdBox.outerHeight(!0)},240,(function(){t.$headAdBox.remove()})),function(t,e){if("localStorage"in window)try{window.localStorage.setItem("closeAd",e)}catch(t){console.log("Sorry, window no localStorage !")}}(0,JSON.stringify({time:(new Date).getTime()}))}))},a}())}();